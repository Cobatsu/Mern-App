{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bexfg\\\\Desktop\\\\BO\\u015E\\\\Study-Online\\\\client\\\\src\\\\Containers\\\\home\\\\Home_Options\\\\Profile_Options\\\\profile.js\";\nimport React, { useEffect, useMemo, useState, useContext, useCallback } from 'react';\nimport { UpdateLoggedin } from '../../../isLoggedin/action';\nimport styled from 'styled-components';\nimport { Link, Route } from 'react-router-dom';\nimport { Context } from '../../../../Context/Context';\nimport { UserInputs } from '../addPerson';\nimport Generator from 'generate-password';\nimport DateFnsUtils from '@date-io/date-fns';\nimport { MuiPickersUtilsProvider, DatePicker } from '@material-ui/pickers';\nimport { Regions } from '../../../../Regions/regions';\nimport Circle from '../../../../UI/Circle';\nimport Modal from '../../../../UI/sentModal';\nimport Stage from '../../../../UI/backStage';\nimport { Checkbox, TextField, Tab, Tabs, Paper, InputLabel, MenuItem, Selec } from '@material-ui/core';\nimport { makeChangeProfiePasswordRequest, makeRelatedAgencyRequest } from '../../../../request/requset';\nimport { Admin, Bayi, Acenta } from './statusArrays/statusArray';\nconst MainWrapper = styled.form`\ndisplay:flex;\nbackground:white;\nwidth:94%;\nmargin:0 auto;\nalign-items:center;\njustify-content:center;\npadding:0;\nmargin-top:2%;\npadding:30px;\n@media (max-width: 1030px) {\n  padding:10px;\n}\nborder-radius:3px;\nflex-flow:column;\n`;\nconst InnerItems = styled.div`\ndisplay:flex;\njustify-content:flex-end;\nwidth:100%;\nmargin-bottom:20px;\npadding:20px 0 5px 0;\ncolor:#30475e;\n`;\nconst InnerContainer = styled.div`\ndisplay:flex;\nwidth:100%;\njustify-content:space-evenly;\nmargin:10px 0;\nalign-items:flex-start;\n@media (max-width: 1030px) {\n  align-items:stretch;\n  flex-flow:column;\n}\n`;\nconst UserMenu = styled.div`\nflex:0.2;\nflex-flow:column;\ndisplay:flex;\njustify-content:center;\nalign-items:center;\npadding: 15px 5px;\nbox-shadow: 0 1px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.03);\nmargin-bottom:10px;\n`;\nconst UserMenuContainer = styled.ul`\nmin-width:175px;\npadding:0;\nmargin:0;\ndisplay:flex;\nflex-flow:column;\nmargin-top:10px;\n`;\nconst InputsWrapper = styled.div`\nflex:0.7;\nflex-flow:column;\nalign-items:center;\ndisplay:flex;\npadding: 15px 5px;\nbox-shadow: 0 1px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.03);\nmargin-bottom:5px;\n`;\nconst Icon = styled.div`\nborder-radius:5px;\npadding:5px 10px;\ncolor:white;\nbackground:#0779e4;\nfont-size:15px;\nmargin-right:10px;\n&:hover{\n    cursor:pointer;\n}\n`;\nconst UserMenuElement = styled.li`\nfont-size:14px;\nmargin-top:4px;\nborder-radius:3px;\n&:hover{\n  background:#ff6363\n}\n`;\nconst UserImage = styled.img`\nmax-width:110px;\n`; //--------------------------------------\n\nconst ChangePasswordContainer = styled.div`\nmax-width:300px;\ndisplay:flex;\njustify-content:center;\n`;\nconst PasswordInputFields = styled.form`\nwidth:100%;\npadding:20px;\n`;\nconst SubmitButton = styled.button`\noutline:none; \nbackground:#00bdaa;\nborder:none;\ncolor:white;\npadding:10px 20px ;\n&:hover{\n    cursor:pointer;\n}\n`;\n\nconst Profile = ({\n  match,\n  ...rest\n}) => {\n  const [disable, setDisable] = useState(true);\n  const {\n    user,\n    ...restContext\n  } = useContext(Context);\n  const [userInformations, setUserInformations] = useState(user);\n  const [backStageOpen, setbackStageOpen] = useState(false);\n  const [dontMatch, setDontMatchPasswords] = useState(false);\n  const [isChanged, setIsChanged] = useState(false);\n  const [warning, setWarning] = useState(false);\n  const [isOldPasswordTrue, setIsOldPasswordTrue] = useState(false);\n  const [password, setPassword] = useState({\n    oldPassword: '',\n    newPassword: '',\n    verifyPassword: ''\n  });\n  const [relatedAgencyLoading, setrelatedAgencyLoading] = useState(false);\n  const [relatedAgency, setRelatedAgency] = useState({});\n  useEffect(() => {\n    //we prevent no need rerenders\n    if (Object.keys(user).length > 0 && Object.keys(userInformations).length <= 0) {\n      setUserInformations(user);\n    }\n  }, [user]);\n  useEffect(() => {\n    if (userInformations.relatedAgencyID) makeRelatedAgencyRequest('get', userInformations.relatedAgencyID, setrelatedAgencyLoading, setRelatedAgency, restContext.isLoggedinf);\n  }, [userInformations.relatedAgencyID]);\n  const UserMenuLinks = useMemo(() => {\n    switch (user.role) {\n      case 'Admin':\n        return Admin();\n        break;\n\n      case 'Temsilci':\n        return Acenta();\n        break;\n\n      case 'Bayi':\n        return Bayi();\n        break;\n\n      default:\n        return [];\n        break;\n    }\n  }, [user]);\n  const closeModal_1 = useCallback(event => {\n    setbackStageOpen(false);\n    setIsChanged(false);\n  }, []);\n  const closeModal_2 = useCallback(event => {\n    setbackStageOpen(false);\n    setWarning(false);\n  }, []);\n  const closeModal_3 = useCallback(event => {\n    setbackStageOpen(false);\n    setDontMatchPasswords(false);\n  }, []);\n  const closeModal_4 = useCallback(event => {\n    setbackStageOpen(false);\n    setIsOldPasswordTrue(false);\n  }, []);\n  const subMenuIndex = React.useMemo(() => {\n    return rest.history.location.pathname.split('/')[3];\n  }, [rest.history.location.pathname]);\n  const GeneratePassword = React.useCallback(() => {\n    const oldState = { ...userInformations\n    }; //we need to get updated userInformations for password to  be created\n\n    const password = Generator.generate({\n      length: 8,\n      numbers: true\n    });\n    oldState['password'] = password;\n    setUserInformations(oldState);\n  }, [userInformations]);\n  const passwordChangeHandler = React.useCallback(type => event => {\n    const copyPasswords = { ...password\n    };\n    copyPasswords[type] = event.target.value;\n    setPassword(copyPasswords);\n  }, [password]); //everytime password changes  , function will be reacreated ;\n\n  const passwordSubmitHandler = event => {\n    setbackStageOpen(true);\n    event.preventDefault();\n\n    for (const key in password) {\n      if (!password[key]) {\n        return setWarning(true);\n      }\n    }\n\n    if (password.newPassword !== password.verifyPassword) {\n      return setDontMatchPasswords(true);\n    }\n\n    makeChangeProfiePasswordRequest('patch', userInformations._id, restContext.isLoggedinf, setIsChanged, setIsOldPasswordTrue, password, setPassword);\n  };\n\n  if (userInformations.region && user.role === 'Bayi') {\n    const City = Regions.find(item => item['il'] === userInformations.region);\n    var townships = City.ilceleri;\n  }\n\n  const textChangeHandler = React.useCallback(Type => event => {\n    let value = event.target.value;\n    const oldState = { ...userInformations\n    };\n    oldState[Type] = value;\n\n    if (Type == 'region') //whenever we want to change region , we have to assign unf value to township\n      {\n        oldState['township'] = '';\n      } //we are doing override here;\n\n\n    setUserInformations(oldState);\n  }, [userInformations]);\n  return /*#__PURE__*/React.createElement(UpdateLoggedin, Object.assign({\n    page: \"PROF\\u0130LE\"\n  }, rest, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 12\n    }\n  }), (Loading, user) => Loading //this is for unloggedin access  ,  user will see blank page\n  ?\n  /*#__PURE__*/\n  React.createElement(Circle, {\n    Load: true,\n    position: \"static\",\n    marginTop: 30,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(MainWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Stage, {\n    backStage: backStageOpen,\n    loading: !isChanged && !warning && !dontMatch && !isOldPasswordTrue,\n    close: isChanged ? closeModal_1 : warning ? closeModal_2 : dontMatch ? closeModal_3 : isOldPasswordTrue ? closeModal_4 : null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 288,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    backStage: isChanged,\n    closeModal: closeModal_1,\n    type: \"CHANGED_PASSWORD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    backStage: warning,\n    closeModal: closeModal_2,\n    type: \"EMPTY_F\\u0130ELD\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    backStage: dontMatch,\n    closeModal: closeModal_3,\n    type: \"PASSWORDS_DONT_MATCH\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 12\n    }\n  }), /*#__PURE__*/React.createElement(Modal, {\n    backStage: isOldPasswordTrue,\n    closeModal: closeModal_4,\n    type: \"OLD_PASSWORD_WRONG\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 12\n    }\n  }), UserMenuLinks.map(item => {\n    return item.desc.toUpperCase() === subMenuIndex.split('_').join(' ').toUpperCase() ? /*#__PURE__*/React.createElement(\"h1\", {\n      key: item.desc,\n      style: {\n        width: '100%',\n        textAlign: 'center',\n        color: '#4cbbb9',\n        fontWeight: 'bolder',\n        fontSize: 15,\n        padding: ' 0 0 10px 0'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 34\n      }\n    }, item.Icon, item.desc) : null;\n  }), /*#__PURE__*/React.createElement(InnerContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(UserMenu, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(UserImage, {\n    src: '/user.jpg',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 24\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '100%',\n      padding: '10px 0 0  0 ',\n      color: '#363062',\n      fontSize: 14,\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      marginRight: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 29\n    }\n  }, userInformations.firstName), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 29\n    }\n  }, userInformations.lastName)), /*#__PURE__*/React.createElement(UserMenuContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 24\n    }\n  }, UserMenuLinks.map((item, index) => {\n    return subMenuIndex === item.desc.split(' ').join('_').toLowerCase() ? /*#__PURE__*/React.createElement(UserMenuElement, {\n      style: {\n        background: '#ff6363'\n      },\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        padding: 5,\n        textDecoration: 'none',\n        display: 'block',\n        width: '100%',\n        height: '100%',\n        color: 'white'\n      },\n      to: '/home/profil/' + item.desc.split(' ').join('_').toLowerCase(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 35\n      }\n    }, item.Icon, \" \", item.desc)) : /*#__PURE__*/React.createElement(UserMenuElement, {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 32\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      style: {\n        padding: 5,\n        textDecoration: 'none',\n        display: 'block',\n        width: '100%',\n        height: '100%'\n      },\n      to: '/home/profil/' + item.desc.split(' ').join('_').toLowerCase(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 35\n      }\n    }, item.Icon, \" \", item.desc));\n  }))), /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/home/profil/genel_bilgiler\",\n    exact: true,\n    render: () => /*#__PURE__*/React.createElement(InputsWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 89\n      }\n    }, /*#__PURE__*/React.createElement(UserInputs, {\n      disabled: disable,\n      isProfil: true,\n      userInformations: userInformations,\n      date: Date.now(),\n      textChangeHandler: textChangeHandler,\n      GeneratePassword: GeneratePassword,\n      user: user,\n      relatedAgency: relatedAgency,\n      relatedAgencyLoading: relatedAgencyLoading,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 31\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    path: \"/home/profil/\\u015Fifre_de\\u011Fi\\u015Ftir\",\n    exact: true,\n    render: () => /*#__PURE__*/React.createElement(InputsWrapper, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 89\n      }\n    }, /*#__PURE__*/React.createElement(ChangePassword, {\n      passwordChangeHandler: passwordChangeHandler,\n      password: password,\n      passwordSubmitHandler: passwordSubmitHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355,\n        columnNumber: 33\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 353,\n      columnNumber: 27\n    }\n  })))));\n};\n\nconst ChangePassword = React.memo(({\n  passwordChangeHandler,\n  passwordSubmitHandler,\n  password\n}) => {\n  return /*#__PURE__*/React.createElement(ChangePasswordContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PasswordInputFields, {\n    onSubmit: passwordSubmitHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    value: password['oldPassword'],\n    onChange: passwordChangeHandler('oldPassword'),\n    type: \"password\",\n    label: \"Eski \\u015Eifre\",\n    style: {\n      width: '100%',\n      padding: '10px 0',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    value: password['newPassword'],\n    onChange: passwordChangeHandler('newPassword'),\n    type: \"password\",\n    label: \"Yeni \\u015Eifre\",\n    style: {\n      width: '100%',\n      padding: '10px 0',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    value: password['verifyPassword'],\n    onChange: passwordChangeHandler('verifyPassword'),\n    type: \"password\",\n    label: \"Yeni \\u015Eifre Onay\",\n    style: {\n      width: '100%',\n      padding: '10px 0',\n      marginBottom: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(InnerItems, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 21\n    }\n  }, \" \", /*#__PURE__*/React.createElement(SubmitButton, {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376,\n      columnNumber: 34\n    }\n  }, \"De\\u011Fi\\u015Ftir\"), \" \")));\n});\nexport default Profile;","map":{"version":3,"sources":["C:/Users/bexfg/Desktop/BOŞ/Study-Online/client/src/Containers/home/Home_Options/Profile_Options/profile.js"],"names":["React","useEffect","useMemo","useState","useContext","useCallback","UpdateLoggedin","styled","Link","Route","Context","UserInputs","Generator","DateFnsUtils","MuiPickersUtilsProvider","DatePicker","Regions","Circle","Modal","Stage","Checkbox","TextField","Tab","Tabs","Paper","InputLabel","MenuItem","Selec","makeChangeProfiePasswordRequest","makeRelatedAgencyRequest","Admin","Bayi","Acenta","MainWrapper","form","InnerItems","div","InnerContainer","UserMenu","UserMenuContainer","ul","InputsWrapper","Icon","UserMenuElement","li","UserImage","img","ChangePasswordContainer","PasswordInputFields","SubmitButton","button","Profile","match","rest","disable","setDisable","user","restContext","userInformations","setUserInformations","backStageOpen","setbackStageOpen","dontMatch","setDontMatchPasswords","isChanged","setIsChanged","warning","setWarning","isOldPasswordTrue","setIsOldPasswordTrue","password","setPassword","oldPassword","newPassword","verifyPassword","relatedAgencyLoading","setrelatedAgencyLoading","relatedAgency","setRelatedAgency","Object","keys","length","relatedAgencyID","isLoggedinf","UserMenuLinks","role","closeModal_1","event","closeModal_2","closeModal_3","closeModal_4","subMenuIndex","history","location","pathname","split","GeneratePassword","oldState","generate","numbers","passwordChangeHandler","type","copyPasswords","target","value","passwordSubmitHandler","preventDefault","key","_id","region","City","find","item","townships","ilceleri","textChangeHandler","Type","Loading","map","desc","toUpperCase","join","width","textAlign","color","fontWeight","fontSize","padding","display","justifyContent","marginRight","firstName","lastName","index","toLowerCase","background","textDecoration","height","Date","now","ChangePassword","memo","marginBottom"],"mappings":"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","sourcesContent":["import React, {useEffect,useMemo,useState,useContext,useCallback} from 'react';\r\nimport {UpdateLoggedin} from '../../../isLoggedin/action'\r\nimport styled from 'styled-components';\r\nimport {Link,Route} from 'react-router-dom'\r\nimport {Context} from '../../../../Context/Context';\r\nimport  {UserInputs}  from '../addPerson';\r\nimport Generator  from 'generate-password';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport {MuiPickersUtilsProvider,DatePicker } from '@material-ui/pickers'\r\nimport {Regions}  from '../../../../Regions/regions'\r\nimport Circle from '../../../../UI/Circle';\r\nimport Modal from '../../../../UI/sentModal';\r\nimport Stage from '../../../../UI/backStage';\r\nimport {Checkbox,TextField,Tab,Tabs,Paper,InputLabel,MenuItem,Selec} from '@material-ui/core'\r\nimport {makeChangeProfiePasswordRequest,makeRelatedAgencyRequest}  from '../../../../request/requset'\r\nimport  {Admin,Bayi,Acenta}  from './statusArrays/statusArray'\r\n\r\nconst MainWrapper = styled.form`\r\ndisplay:flex;\r\nbackground:white;\r\nwidth:94%;\r\nmargin:0 auto;\r\nalign-items:center;\r\njustify-content:center;\r\npadding:0;\r\nmargin-top:2%;\r\npadding:30px;\r\n@media (max-width: 1030px) {\r\n  padding:10px;\r\n}\r\nborder-radius:3px;\r\nflex-flow:column;\r\n`\r\nconst InnerItems = styled.div`\r\ndisplay:flex;\r\njustify-content:flex-end;\r\nwidth:100%;\r\nmargin-bottom:20px;\r\npadding:20px 0 5px 0;\r\ncolor:#30475e;\r\n`\r\n\r\nconst InnerContainer = styled.div`\r\ndisplay:flex;\r\nwidth:100%;\r\njustify-content:space-evenly;\r\nmargin:10px 0;\r\nalign-items:flex-start;\r\n@media (max-width: 1030px) {\r\n  align-items:stretch;\r\n  flex-flow:column;\r\n}\r\n`\r\nconst UserMenu = styled.div`\r\nflex:0.2;\r\nflex-flow:column;\r\ndisplay:flex;\r\njustify-content:center;\r\nalign-items:center;\r\npadding: 15px 5px;\r\nbox-shadow: 0 1px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.03);\r\nmargin-bottom:10px;\r\n`\r\nconst UserMenuContainer = styled.ul`\r\nmin-width:175px;\r\npadding:0;\r\nmargin:0;\r\ndisplay:flex;\r\nflex-flow:column;\r\nmargin-top:10px;\r\n`\r\n\r\nconst InputsWrapper = styled.div`\r\nflex:0.7;\r\nflex-flow:column;\r\nalign-items:center;\r\ndisplay:flex;\r\npadding: 15px 5px;\r\nbox-shadow: 0 1px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -1px rgba(0, 0, 0, 0.03);\r\nmargin-bottom:5px;\r\n`\r\nconst Icon = styled.div`\r\nborder-radius:5px;\r\npadding:5px 10px;\r\ncolor:white;\r\nbackground:#0779e4;\r\nfont-size:15px;\r\nmargin-right:10px;\r\n&:hover{\r\n    cursor:pointer;\r\n}\r\n`\r\nconst UserMenuElement = styled.li`\r\nfont-size:14px;\r\nmargin-top:4px;\r\nborder-radius:3px;\r\n&:hover{\r\n  background:#ff6363\r\n}\r\n`\r\n\r\nconst UserImage = styled.img`\r\nmax-width:110px;\r\n`\r\n//--------------------------------------\r\n\r\nconst ChangePasswordContainer = styled.div`\r\nmax-width:300px;\r\ndisplay:flex;\r\njustify-content:center;\r\n`\r\n\r\nconst PasswordInputFields = styled.form `\r\nwidth:100%;\r\npadding:20px;\r\n`\r\nconst SubmitButton  = styled.button`\r\noutline:none; \r\nbackground:#00bdaa;\r\nborder:none;\r\ncolor:white;\r\npadding:10px 20px ;\r\n&:hover{\r\n    cursor:pointer;\r\n}\r\n`\r\n\r\n\r\n\r\nconst Profile = ({match,...rest})=>{\r\n       \r\n     const [disable , setDisable]  = useState(true);      \r\n     const {user,...restContext} = useContext(Context);\r\n     const [userInformations,setUserInformations] = useState(user);\r\n     const [backStageOpen ,setbackStageOpen] = useState(false);\r\n     const [dontMatch,setDontMatchPasswords]  = useState(false);\r\n     const [isChanged , setIsChanged ] = useState(false);\r\n     const [warning ,setWarning] = useState(false);\r\n     const [isOldPasswordTrue  , setIsOldPasswordTrue ] = useState(false);\r\n     const [password  , setPassword ]  = useState({\r\n      oldPassword  : '',\r\n      newPassword  : '',\r\n      verifyPassword  : '',  \r\n    })\r\n    const [relatedAgencyLoading , setrelatedAgencyLoading]= useState(false);\r\n    const [relatedAgency , setRelatedAgency] = useState({});\r\n\r\n     useEffect(()=>{  //we prevent no need rerenders\r\n\r\n       if(Object.keys(user).length>0 && Object.keys(userInformations).length<=0)\r\n       {\r\n         setUserInformations(user);  \r\n       } \r\n\r\n     },[user])\r\n    \r\n     useEffect(()=>{\r\n       \r\n      if(userInformations.relatedAgencyID)\r\n            makeRelatedAgencyRequest('get',userInformations.relatedAgencyID,setrelatedAgencyLoading,setRelatedAgency,restContext.isLoggedinf)\r\n\r\n     },[userInformations.relatedAgencyID])\r\n\r\n     const UserMenuLinks = useMemo(()=>{\r\n         switch(user.role)\r\n         {\r\n            case 'Admin':\r\n\r\n            return Admin();\r\n\r\n            break;\r\n\r\n            case 'Temsilci':\r\n\r\n              return Acenta();\r\n\r\n            break;\r\n\r\n            case 'Bayi':\r\n              return Bayi();\r\n            break;\r\n\r\n            default : \r\n                return [];\r\n            break;\r\n         }\r\n     },[user]);\r\n\r\n     \r\n     const closeModal_1 = useCallback(event=>{\r\n      setbackStageOpen(false);\r\n      setIsChanged(false);\r\n     },[])\r\n\r\n     const closeModal_2 =useCallback(event=>{\r\n       setbackStageOpen(false);\r\n       setWarning(false);\r\n     },[])\r\n\r\n     const closeModal_3 = useCallback(event=>{\r\n      setbackStageOpen(false);\r\n      setDontMatchPasswords(false);\r\n     },[])\r\n\r\n     const closeModal_4 = useCallback(event =>{\r\n      setbackStageOpen(false);\r\n      setIsOldPasswordTrue(false);\r\n     },[])\r\n\r\n\r\n\r\n     const subMenuIndex = React.useMemo(()=>{\r\n       return rest.history.location.pathname.split('/')[3];\r\n     },[rest.history.location.pathname]);\r\n\r\n     \r\n     const GeneratePassword = React.useCallback(()=> {\r\n      const oldState = {...userInformations}; //we need to get updated userInformations for password to  be created\r\n      const password = Generator.generate({\r\n        length: 8,\r\n        numbers: true\r\n      });\r\n      oldState['password']=password;\r\n      setUserInformations(oldState);\r\n    },[userInformations])\r\n\r\n     const passwordChangeHandler =React.useCallback(type => event =>{\r\n      const copyPasswords  = {...password};\r\n      copyPasswords[type]=event.target.value;\r\n      setPassword(copyPasswords);\r\n     },[password]); //everytime password changes  , function will be reacreated ;\r\n\r\n    const passwordSubmitHandler = event  => {\r\n\r\n      setbackStageOpen(true);\r\n\r\n      event.preventDefault();\r\n\r\n       for (const key in password) {  \r\n          if(!password[key])\r\n          {\r\n              return setWarning(true)\r\n          }\r\n       }\r\n\r\n       if(password.newPassword !== password.verifyPassword)\r\n       {\r\n          return  setDontMatchPasswords(true);\r\n       }\r\n\r\n\r\n       makeChangeProfiePasswordRequest('patch',userInformations._id,restContext.isLoggedinf,setIsChanged,setIsOldPasswordTrue,password,setPassword);\r\n       \r\n     }\r\n     \r\n   \r\n     if(userInformations.region && user.role === 'Bayi' )\r\n     {\r\n      const City =Regions.find((item)=>item['il'] === userInformations.region) ;\r\n      var townships = City.ilceleri;\r\n     }\r\n\r\n    const textChangeHandler = React.useCallback((Type) => event => {\r\n      let value = event.target.value;\r\n      const oldState = {...userInformations};\r\n      oldState[Type]=value \r\n      if(Type=='region') //whenever we want to change region , we have to assign unf value to township\r\n      {\r\n         oldState['township']='';\r\n      }\r\n      //we are doing override here;\r\n      setUserInformations(oldState);\r\n    },[userInformations]);\r\n\r\n\r\n    return <UpdateLoggedin page='PROFİLE' {...rest}>\r\n     {\r\n          (Loading,user)=> Loading   //this is for unloggedin access  ,  user will see blank page\r\n\r\n          ?\r\n\r\n          <Circle  Load={true} position='static' marginTop={30}/>\r\n\r\n          :\r\n\r\n            <MainWrapper>\r\n\r\n           <Stage backStage={backStageOpen} loading={!isChanged && !warning && !dontMatch && !isOldPasswordTrue}   close={isChanged ? closeModal_1 : warning ? closeModal_2: dontMatch ?  closeModal_3 : isOldPasswordTrue ? closeModal_4 : null }/>\r\n\r\n           <Modal backStage={isChanged} closeModal={closeModal_1} type='CHANGED_PASSWORD'/>\r\n           <Modal backStage={warning} closeModal={closeModal_2} type='EMPTY_FİELD'/>\r\n           <Modal backStage={dontMatch} closeModal={closeModal_3} type='PASSWORDS_DONT_MATCH'/>\r\n           <Modal backStage={isOldPasswordTrue} closeModal={closeModal_4} type='OLD_PASSWORD_WRONG'/>\r\n                     {\r\n                         UserMenuLinks.map((item)=>{ \r\n                                 return item.desc.toUpperCase() === subMenuIndex.split('_').join(' ').toUpperCase() ? \r\n                                 <h1 key={item.desc}  style={{width:'100%',textAlign:'center' , color:'#4cbbb9',fontWeight:'bolder',fontSize:15,padding:' 0 0 10px 0'}}>\r\n                                   {item.Icon}\r\n                                   {item.desc}\r\n                                 </h1>             \r\n                                 :\r\n                                 null\r\n                         })\r\n                     }\r\n                  <InnerContainer>\r\n\r\n                     <UserMenu>\r\n                       <UserImage  src={'/user.jpg'}></UserImage> \r\n\r\n                       <div style={{width:'100%',padding:'10px 0 0  0 ', color:'#363062',fontSize:14 , display:'flex' , justifyContent:'center'}}>\r\n\r\n                            <span style={{marginRight:5}}>{userInformations.firstName}</span> \r\n                            <span>{userInformations.lastName}</span>\r\n                      \r\n                      </div>\r\n\r\n                       <UserMenuContainer>\r\n                            {\r\n                              UserMenuLinks.map((item,index)=>{\r\n                                return subMenuIndex === item.desc.split(' ').join('_').toLowerCase() ?   \r\n                                <UserMenuElement style={{background:'#ff6363'}} key={index} >\r\n                                  <Link style={{padding:5,textDecoration:'none' , display:'block' , width:'100%' , height:'100%',color:'white'}}  to={'/home/profil/' + item.desc.split(' ').join('_').toLowerCase() }>{item.Icon} {item.desc}</Link>\r\n                               </UserMenuElement>\r\n                               :\r\n                               <UserMenuElement key={index}>\r\n                                  <Link style={{padding:5,textDecoration:'none' , display:'block' , width:'100%' , height:'100%'}}  to={'/home/profil/' + item.desc.split(' ').join('_').toLowerCase()}>{item.Icon} {item.desc}</Link>\r\n                               </UserMenuElement>                 \r\n                               })\r\n                            }           \r\n                       </UserMenuContainer>\r\n                       \r\n                   </UserMenu> \r\n                    \r\n                   <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n                     \r\n\r\n                          <Route path='/home/profil/genel_bilgiler' exact   render={()=><InputsWrapper> \r\n                              <UserInputs\r\n                                  disabled={disable} \r\n                                  isProfil={true}  \r\n                                  userInformations={userInformations} \r\n                                  date={Date.now()}   \r\n                                  textChangeHandler={textChangeHandler}  \r\n                                  GeneratePassword={GeneratePassword} \r\n                                  user={user}\r\n                                  relatedAgency={relatedAgency}\r\n                                  relatedAgencyLoading={relatedAgencyLoading}\r\n                                  />\r\n\r\n                              </InputsWrapper>\r\n                          } />\r\n\r\n                          <Route path='/home/profil/şifre_değiştir' exact   render={()=><InputsWrapper> \r\n                          \r\n                                <ChangePassword passwordChangeHandler={passwordChangeHandler} password={password}  passwordSubmitHandler={passwordSubmitHandler}/>\r\n\r\n                          </InputsWrapper>\r\n                          } />\r\n\r\n\r\n\r\n                         \r\n                   </MuiPickersUtilsProvider>  \r\n                   </InnerContainer>\r\n                </MainWrapper>\r\n     }\r\n    </UpdateLoggedin>\r\n}\r\n\r\nconst ChangePassword = React.memo(({passwordChangeHandler,passwordSubmitHandler,password})=>{\r\n    return  <ChangePasswordContainer>\r\n             <PasswordInputFields onSubmit={passwordSubmitHandler}>\r\n                    <TextField value={password['oldPassword']}   onChange = {passwordChangeHandler('oldPassword')} type='password' label='Eski Şifre'  style={{width:'100%',padding:'10px 0',marginBottom:5}}   />\r\n                    <TextField value={password['newPassword']}   onChange = {passwordChangeHandler('newPassword')} type='password' label='Yeni Şifre'  style={{width:'100%',padding:'10px 0',marginBottom:5}}   />\r\n                    <TextField value={password['verifyPassword']} onChange = {passwordChangeHandler('verifyPassword')} type='password' label='Yeni Şifre Onay'  style={{width:'100%',padding:'10px 0',marginBottom:5}}   />\r\n                    <InnerItems> <SubmitButton type='submit'>Değiştir</SubmitButton> </InnerItems>\r\n             </PasswordInputFields>\r\n    </ChangePasswordContainer>\r\n});\r\n\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}